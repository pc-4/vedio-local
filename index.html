<!DOCTYPE html>
<html>
<head>
    <title>Local Media Hub</title>
    <style>
        body { margin: 0; background: #0f0f0f; color: white; font-family: sans-serif; display: flex; }
        nav { width: 200px; height: 100vh; background: #1a1a1a; padding: 20px; position: fixed; }
        nav a { display: block; color: white; text-decoration: none; padding: 10px; margin-bottom: 5px; border-radius: 5px; }
        nav a:hover { background: #333; }
        main { margin-left: 240px; padding: 20px; width: 100%; }
        .status { float: right; padding: 5px 10px; border-radius: 15px; font-size: 12px; }
        .online { background: green; } .offline { background: red; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .card { background: #1e1e1e; border-radius: 10px; overflow: hidden; cursor: pointer; }
        .card img { width: 100%; height: 150px; object-fit: cover; }
        .card p { padding: 10px; font-size: 14px; margin: 0; }
        #player-box { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:100; justify-content:center; align-items:center; flex-direction:column; }
        video { width: 80%; max-height: 80%; border: 2px solid #333; }
        .close { color: white; font-size: 30px; cursor: pointer; margin-bottom: 10px; }
    </style>
</head>
<body>

<nav>
    <h2>LocalHub</h2>
    <a href="/">Videos</a>
    <a href="/images">Images</a>
</nav>

<main>
    <div class="status {{ 'online' if online else 'offline' }}">
        {{ 'Connected' if online else 'Offline' }}
    </div>
    <h1>{{ mode.capitalize() }}</h1>
    
    <div class="grid">
        {% if mode == 'video' %}
            {% for v in items %}
            <div class="card" onclick="playVid('{{ v.name|urlencode }}')">
                <img src="/assets/thubnail/{{ v.thumb }}">
                <p>{{ v.name }}</p>
            </div>
            {% endfor %}
        {% else %}
            {% for img in items %}
            <div class="card">
                <img src="/assets/image/{{ img }}">
                <p>{{ img }}</p>
            </div>
            {% endfor %}
        {% endif %}
    </div>
</main>

<div id="player-box">
    <div class="close" onclick="stopVid()">CLOSE âœ•</div>
    <video id="main-v" controls></video>
</div>

<script>
    function playVid(name) {
        const p = document.getElementById('player-box');
        const v = document.getElementById('main-v');
        // We decode the name to make sure the slash in the path works
        v.src = "/assets/vedios/" + decodeURIComponent(name);
        p.style.display = 'flex';
        v.play();
    }
    function stopVid() {
        const p = document.getElementById('player-box');
        const v = document.getElementById('main-v');
        v.pause();
        p.style.display = 'none';
    }
</script>

</body>
</html>